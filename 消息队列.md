比较

|                         | ActiveMQ         | RabbitMQ         | RocketMQ                                        | Kafka                                                |
| ----------------------- | ---------------- | ---------------- | ----------------------------------------------- | ---------------------------------------------------- |
| 功能                    | MQ功能极其完备   | MQ功能完备       | MQ功能较为完善                                  | MQ功能较为简单，主要使用在大数据的实时计算和日志采集 |
| 单机吞吐量              | 万级             | 万级             | 十万级                                          | 十万级                                               |
| 时效性                  | ms级             | μs级（延迟最低） | ms级                                            | ms级以内                                             |
| 可用性                  | 高，基于主从架构 | 高，基于主从架构 | 非常高，分布式架构                              | 非常高，分布式架构，一个数据多个副本                 |
| 消息可靠性              |                  |                  |                                                 |                                                      |
| topic数量对吞吐量的影响 |                  |                  | topic可以达到几百几千级别，吞吐量会有小幅度下降 | topic可以达到几百几千级别，吞吐量会大幅下降          |



# 消息队列如何保证消息顺序性

## rabbitMQ

每个消费者读取一个queue

## kafka

每个消费者**只能消费一个**partition，若消费者比partition多，则有消费者拿不到数据

写入同一个partition的数据一定是有顺序的，因此生产者写入时，可以指定一个key，则相同key一定会分发到同一个partition

![image-20220318015558871](images\消息队列\image-20220318015558871.png)





高可用

![image-20220420105234912](images/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/image-20220420105234912.png)

